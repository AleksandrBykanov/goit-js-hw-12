{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImage(image, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = new URLSearchParams({\n    key: '44411867-7607aa296582669a38968dfd5',\n    q: image,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15\n  });\n  const url = `${BASE_URL}${END_POINT}?${params}`;\n  const res = await axios.get(url)\n  return res.data;\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from '../main';\n\nexport function cards(arr) {\n  const markup = arr.map(card).join('\\n');\n  return markup;\n}\n\nexport function card(images) {\n  return `<li class=\"gallery-item\"\n      <a class=\"gallery-link\" href=\"${images.largeImageURL}\">\n    <img\n      width=360;\n      height=200;\n      class=\"gallery-image\"\n      src=\"${images.webformatURL}\"\n      alt=\"${images.tags} \" />\n          <div class=\"image-info\">\n               <p>LIKES: ${images.likes}</p>\n                    <p>VIEWS: ${images.views}</p>\n                    <p>COMMENTS: ${images.comments}</p>\n                    <p>DOWNLOADS: ${images.downloads}</p>\n                </div>\n            </a>\n            </li>\n        `;\n}\n\nexport const lightbox = new SimpleLightbox('.gallery li', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nexport function showBtn() {\n  refs.loadBtn.classList.remove('hide');\n}\n\nexport function hideBtn() {\n  refs.loadBtn.classList.add('hide');\n}","import { getImage } from './js/pixabay-api.js';\nimport {\n  showLoader,\n  hideLoader,\n  showBtn,\n  hideBtn,\n  lightbox,\n  cards,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nlet value = '';\nlet currentPage = 1;\nlet maxPage = 1;\nconst perPage = 15;\n\nrefs.form.addEventListener('submit', async e => {\n  e.preventDefault();\n  value = e.target.elements.search.value.trim();\n  currentPage = 1;\n  if (value === '') {\n    return iziToast.warning({\n      title: 'warning',\n      message: 'Enter a word for the query, please.',\n      position: 'topRight',\n      displayMode: 'once',\n    });\n  }\n\n  showLoader();\n  try {\n    const data = await getImage(value, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        displayMode: 'once',\n      });\n    }\n    const elements = cards(data.hits);\n    refs.gallery.innerHTML = elements;\n    lightbox.refresh();\n  } catch {}\n  hideLoader();\n  updateBtn();\n  refs.form.reset();\n});\n\nrefs.loadBtn.addEventListener('click', async () => {\n  showLoader();\n  hideBtn();\n  try {\n    currentPage++;\n    const data = await getImage(value, currentPage);\n    const elements = cards(data.hits);\n    refs.gallery.insertAdjacentHTML('beforeend', elements);\n    lightbox.refresh();\n    skipImage();\n  } catch {\n    iziToast.error({\n      title: 'Error',\n      message: 'Illegal operation',\n      displayMode: 'once',\n    });\n  }\n  hideLoader();\n  updateBtn();\n});\n\nfunction updateBtn() {\n  if (currentPage >= maxPage) {\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomCenter',\n      displayMode: 'once',\n    });\n    hideBtn();\n  } else {\n    showBtn();\n  }\n}\n\nfunction skipImage() {\n  const elem = refs.gallery.firstElementChild;\n  const height = elem.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImage","image","currentPage","BASE_URL","END_POINT","params","url","axios","cards","arr","card","images","lightbox","SimpleLightbox","showLoader","refs","hideLoader","showBtn","hideBtn","value","maxPage","perPage","iziToast","data","elements","updateBtn","skipImage","height"],"mappings":"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"}